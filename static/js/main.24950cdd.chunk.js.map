{"version":3,"sources":["components/Button.tsx","containers/Welcome/index.tsx","assets/tick.png","utils/zeroPadding.ts","containers/Confirm/index.tsx","assets/cross.png","assets/back.svg","assets/qrOverlay.png","containers/QR/index.tsx","utils/qrDecode.ts","App.tsx","serviceWorkerRegistration.ts","index.tsx"],"names":["Button","styled","button","Welcome","place","setPlace","useEffect","ContentWrapper","Msg","Place","value","onChange","e","target","placeholder","ActionWrapper","disabled","to","StyledLink","div","input","Link","zeroPadding","String","slice","Confirm","date","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","Cross","src","readOnly","Time","Tick","tick","img","QR","browserHistory","useHistory","Header","BackButton","back","Overlay","Message","VideoContainer","StyledScanner","onDecode","data","startsWith","json","JSON","parse","window","atob","substring","console","log","decodeURIComponent","escape","nameZh","qrDecode","push","constraints","audio","video","facingMode","captureSize","width","height","Scanner","qrOverlay","App","useState","GlobalStyle","basename","exact","path","createGlobalStyle","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.24950cdd.chunk.js","sourcesContent":["import styled from \"styled-components\";\n\nexport const Button = styled.button`\n  display: block;\n  margin: auto;\n  margin-bottom: 16px;\n  font-size: 24px;\n  padding: 10px 80px;\n  border-radius: 48px;\n  background-color: #fed426;\n  box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.5);\n  border: 0;\n  outline: none;\n\n  &:focus {\n    outline: none;\n    text-decoration: none;\n  }\n`;\n","import React, { useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { Button } from \"../../components/Button\";\n\ntype Props = {\n  place: string;\n  setPlace: (input: string) => void;\n};\n\nexport const Welcome = ({ place, setPlace }: Props) => {\n  useEffect(() => {\n    setPlace(\"\");\n  }, [setPlace]);\n\n  return (\n    <>\n      <ContentWrapper>\n        <Msg>我想去</Msg>\n        <Place\n          value={place}\n          onChange={(e) => setPlace(e.target.value)}\n          placeholder=\"輸入地址\"\n        />\n      </ContentWrapper>\n      <ActionWrapper>\n        {place === \"\" ? (\n          <Button disabled>話去就去!</Button>\n        ) : (\n          <Link to=\"/confirm\">\n            <Button>話去就去!</Button>\n          </Link>\n        )}\n        <StyledLink to=\"/qr\">掃瞄二維碼</StyledLink>\n      </ActionWrapper>\n    </>\n  );\n};\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n`;\n\nconst Msg = styled.div`\n  color: #ffffff;\n  text-align: center;\n  font-size: 15px;\n`;\n\nconst Place = styled.input`\n  text-align: center;\n  font-size: 32px;\n  background-color: transparent;\n  border: 0;\n  outline: none;\n  margin: 8px 0;\n  color: #fed426;\n\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst ActionWrapper = styled.div`\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  text-align: center;\n  color: #fff;\n  padding-bottom: 40px;\n`;\n\nconst StyledLink = styled(Link)`\n  color: #ffffff;\n`;\n","export default __webpack_public_path__ + \"static/media/tick.e3b91334.png\";","export const zeroPadding = (input: string | number) =>\n  (\"00\" + String(input)).slice(-2);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport cross from \"../../assets/cross.png\";\nimport tick from \"../../assets/tick.png\";\nimport { Link } from \"react-router-dom\";\nimport { Button } from \"../../components/Button\";\nimport { zeroPadding } from \"../../utils/zeroPadding\";\n\ntype Props = {\n  place: string;\n};\n\nexport const Confirm = ({ place }: Props) => {\n  const date = new Date();\n  const year = date.getFullYear();\n  const month = date.getMonth() + 1;\n  const day = date.getDate();\n  const hour = date.getHours();\n  const minute = date.getMinutes();\n\n  return (\n    <>\n      <Link to=\"/\">\n        <Cross src={cross} />\n      </Link>\n      <ContentWrapper>\n        <Msg>你已進入場所</Msg>\n        <Place value={place} readOnly />\n        <Time>{`${year}-${zeroPadding(month)}-${zeroPadding(day)} ${zeroPadding(\n          hour\n        )}:${zeroPadding(minute)}`}</Time>\n        <Tick src={tick} />\n      </ContentWrapper>\n      <ActionWrapper>\n        <Link to=\"/\">\n          <Button>離開</Button>\n        </Link>\n        當你離開時請緊記按\"離開\"\n      </ActionWrapper>\n    </>\n  );\n};\n\nconst Cross = styled.img`\n  height: 80px;\n  float: right;\n  position: absolute;\n  right: 0;\n`;\n\nconst Tick = styled.img`\n  margin: auto;\n  margin-top: 80px;\n  width: 40%;\n`;\n\nconst ContentWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n`;\n\nconst Msg = styled.div`\n  color: #ffffff;\n  text-align: center;\n  font-size: 15px;\n  margin-top: 120px;\n`;\n\nconst Place = styled.input`\n  text-align: center;\n  font-size: 32px;\n  background-color: transparent;\n  border: 0;\n  outline: none;\n  margin: 8px 0;\n  color: #fed426;\n\n  &:focus {\n    outline: none;\n  }\n`;\n\nconst Time = styled.div`\n  color: #ffffff;\n  text-align: center;\n`;\n\nconst ActionWrapper = styled.div`\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  text-align: center;\n  color: #fff;\n  padding-bottom: 40px;\n`;\n","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/back.7bf7a56f.svg\";","export default __webpack_public_path__ + \"static/media/qrOverlay.399bdc2a.png\";","import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Scanner from \"react-webcam-qr-scanner\";\nimport styled from \"styled-components\";\nimport back from \"../../assets/back.svg\";\nimport { qrDecode } from \"../../utils/qrDecode\";\nimport qrOverlay from \"../../assets/qrOverlay.png\";\n\ntype Props = {\n  setPlace: (input: string) => void;\n};\n\nexport const QR = ({ setPlace }: Props) => {\n  const browserHistory = useHistory();\n\n  const handleScan = ({ data }: { data: string }) => {\n    if (!data) return;\n    const place = qrDecode(data);\n    if (place !== \"\") {\n      setPlace(place);\n      browserHistory.push(\"/confirm\");\n    }\n  };\n\n  return (\n    <>\n      <Header>\n        <Link to=\"/\">\n          <BackButton src={back} />\n        </Link>\n        掃瞄二維碼\n      </Header>\n      <Overlay />\n      <Message>掃瞄二維碼</Message>\n      <VideoContainer>\n        <StyledScanner\n          onDecode={handleScan}\n          constraints={{\n            audio: false,\n            video: {\n              facingMode: \"environment\",\n            },\n          }}\n          captureSize={{ width: 1280, height: 720 }}\n        />\n      </VideoContainer>\n    </>\n  );\n};\n\nconst BackButton = styled.img`\n  height: 20px;\n  top: 14px;\n  left: 16px;\n  position: absolute;\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  position: absolute;\n  z-index: 100;\n  color: #ffffff;\n  background-color: #12b188;\n  text-align: center;\n  line-height: 48px;\n  font-size: 18px;\n`;\n\nconst VideoContainer = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n`;\n\nconst StyledScanner = styled(Scanner)`\n  /* Make video to at least 100% wide and tall */\n  min-width: 100%;\n  min-height: 100%;\n\n  /* Setting width & height to auto prevents the browser from stretching or squishing the video */\n  width: auto;\n  height: auto;\n\n  /* Center the video */\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst Overlay = styled.div`\n  /* The image used */\n  background-image: url(\"${qrOverlay}\");\n\n  /* Full height */\n  height: 100%;\n\n  /* Center and scale the image nicely */\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n\n  z-index: 50;\n  position: relative;\n`;\n\nconst Message = styled.div`\n  position: absolute;\n  z-index: 51;\n  bottom: 25%;\n  width: 100%;\n  text-align: center;\n  color: #ffffff;\n  font-size: 16px;\n`;\n","type DecodedJSON = {\n  hash: string;\n  metadata: { typeEn: string; typeZh: string };\n  nameEn: string;\n  nameZh: string;\n  type: string;\n};\n\n// https://github.com/aaasssdddwww/back-home-safe/pull/7\nexport const qrDecode = (input: string): string => {\n  if (!input.startsWith(\"HKEN:\")) return \"\";\n  const json: DecodedJSON = JSON.parse(window.atob(input.substring(14)));\n  console.log(json);\n  return decodeURIComponent(escape(json.nameZh));\n};\n","import React, { useState } from \"react\";\nimport { createGlobalStyle } from \"styled-components\";\n\nimport { Route, HashRouter, Switch, Redirect } from \"react-router-dom\";\nimport { Welcome } from \"./containers/Welcome\";\nimport { Confirm } from \"./containers/Confirm\";\nimport { QR } from \"./containers/QR\";\n\nfunction App() {\n  const [place, setPlace] = useState(\"\");\n\n  return (\n    <>\n      <GlobalStyle />\n      <HashRouter basename=\"/\">\n        <Switch>\n          <Route exact path=\"/\">\n            <Welcome place={place} setPlace={setPlace} />\n          </Route>\n          <Route exact path=\"/qr\">\n            <QR setPlace={setPlace} />\n          </Route>\n          <Route exact path=\"/confirm\">\n            <Confirm place={place} />\n          </Route>\n          <Redirect to=\"/\" />\n        </Switch>\n      </HashRouter>\n    </>\n  );\n}\n\nexport default App;\n\nconst GlobalStyle = createGlobalStyle`\nhtml {\n  width: 100%;\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background-color:#12b188;\n  width: 100%;\n  height: 100%;\n}\n\n#root {\n  width: 100%;\n  height: 100%;\n}\n\na {\n  text-decoration: none;\n}\n`;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n"],"sourceRoot":""}